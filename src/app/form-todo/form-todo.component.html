<dialog
  class="main-dialog"
  #create_todo_dialog
>
    <!-- appSafeCloseDialog
	 [customSaveForm]="saveFormData"
	 [customRestoreForm]="restoreFormData" -->
    <div class="todo-details-panel">
    <div class="panel-header">
      <h2>Create New Todo</h2>
      <p class="panel-subtitle">Schedule a new to Todo</p>
      <button class="btn save-button" (click)="onFormSave($event)">Save</button>
    </div>

    <form [formGroup]="todoFormGroup" class="actual-form">
      <div class="form-group">
        <label for="control-description">Description<span class="required-astrick">*</span></label>
        <textarea
          id="control-description"
          formControlName="description"
          class="form-input"
          placeholder="Enter description"
          [class.error]="description.touched && description.dirty && description.invalid"
          spellcheck="false"
          autocomplete="off"
        ></textarea>
        @if ((description.touched && description.dirty) || showAllErrors) {
          @if (description.errors?.['required']) {
            <p class="field-error">First name is required</p>
          } @else if (description.errors?.['minlength']) {
            <p class="field-error">Description should be at least 2 characters long</p>
          } @else if (description.errors?.['maxlength']) {
            <p class="field-error">Description should be under 50 characters</p>
          }
        }
      </div>

      <div class="form-row">
        <div class="form-group half-width">
          <label for="control-deadline-date"
            >Deadline Date<span class="required-astrick">*</span></label
          >
          <input
            id="control-deadline-date"
            type="date"
            formControlName="deadlineDate"
            class="form-input"
            [class.error]="deadlineDate.touched && deadlineDate.dirty && deadlineDate.invalid"
          />
          @if ((deadlineDate.touched && deadlineDate.dirty) || showAllErrors) {
            @if (deadlineDate.errors?.['required']) {
              <p class="field-error">(Deadline date is required)</p>
            }
          }

          <!-- <label for="control-title">Deadline Time <span class="required-astrick">*</span></label>
		  <input
		  id="control-title"
		  type="time"
		  formControlName="deadlineTime"
		  class="form-input"
		  [class.error]="deadlineTime.touched && deadlineTime.dirty && deadlineTime.invalid"
		  />
		  @if ((deadlineTime.touched && deadlineTime.dirty) || showAllErrors) {
		  @if (deadlineTime.errors?.['required']) {
		  <p class="field-error">(Deadline Time is required)</p>
		  }
		  } -->
        </div>

        <div class="form-group half-width">
          <label for="control-estimated-time"
            >Estimated Time <span class="required-astrick">*</span></label
          >
          <div class="time-picker-group">
            <div class="time-picker-field">
              <select
                id="control-estimated-hours"
                formControlName="estimatedCompletionTimeMinutes"
                class="form-input time-select"
                [class.error]="
                  estimatedCompletionTimeMinutes.touched &&
                  estimatedCompletionTimeMinutes.dirty &&
                  estimatedCompletionTimeMinutes.invalid
                "
              >
                <option value="" disabled selected>Hours</option>
                @for (hour of [0, 1, 2, 3, 4, 5, 6, 7, 8]; track hour) {
                  <option [value]="hour * 60">{{ hour }}h</option>
                }
              </select>
            </div>
            <span class="time-separator">:</span>
            <div class="time-picker-field">
              <select
                id="control-estimated-minutes"
                class="form-input time-select"
                [class.error]="
                  estimatedCompletionTimeMinutes.touched &&
                  estimatedCompletionTimeMinutes.dirty &&
                  estimatedCompletionTimeMinutes.invalid
                "
              >
                <option value="0" selected>0m</option>
                @for (min of [15, 30, 45]; track min) {
                  <option [value]="min">{{ min }}m</option>
                }
              </select>
            </div>
          </div>
          @if (
            (estimatedCompletionTimeMinutes.touched && estimatedCompletionTimeMinutes.dirty) ||
            showAllErrors
          ) {
            @if (estimatedCompletionTimeMinutes.errors?.['required']) {
              <p class="field-error">Estimated time is required</p>
            }
          }
        </div>
      </div>
    </form>
  </div>
</dialog>
